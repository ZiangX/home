<!doctype html>
<html lang="en">

<!-- Google Web Fonts
  ================================================== -->
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900%7CLora:400,400i,700,700i" rel="stylesheet">

<!-- Basic Page Needs
  ================================================== -->

<title>Chat</title>

<!--meta info-->
<meta charset="utf-8">
<meta name="author" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="referrer" content="no-referrer">

<!-- Mobile Specific Metas
  ================================================== -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Vendor CSS
  ============================================ -->

<link rel="stylesheet" href="font/demo-files/demo.css">
<link rel="stylesheet" href="plugins/fancybox/jquery.fancybox.css">
<link rel="stylesheet" href="plugins/revolution/css/settings.css">
<link rel="stylesheet" href="plugins/revolution/css/layers.css">
<link rel="stylesheet" href="plugins/revolution/css/navigation.css">

<!-- CSS theme files
  ============================================ -->
<!-- <link rel="stylesheet" href="css/bootstrap-grid.min.css"> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
  integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="css/fontello.css">
<link rel="stylesheet" href="css/owl.carousel.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/responsive.css">

</head>

<body>

   <!-- Messenger Chat Plugin Code -->
   <div id="fb-root"></div>
   <!-- Your Chat Plugin code -->
   <div id="fb-customer-chat" class="fb-customerchat">
   </div>

   <!-- Show chat plugin -->
    <!-- <script>
     const queryString = window.location.search;

     const urlParams = new URLSearchParams(queryString);
     const page_id = urlParams.get('page_id');
     const listing_id = urlParams.get('listing_id');
 
     var chatbox = document.getElementById('fb-customer-chat');
     chatbox.setAttribute("page_id", page_id);
     chatbox.setAttribute("attribution", "biz_inbox");
     chatbox.setAttribute("ref", `${listing_id}-${navigator.language}`);
 
     let hideDialog;

     window.fbAsyncInit = function() {
       FB.init({
         xfbml            : true,
         version          : 'v12.0'
       });
      //  Place extra function executions here
      // alert('ready to show the chat plugin')
      // FB.XFBML.parse();

      // Hide the plugin 
      // FB.CustomerChat.hide();

      // Hide the dialog
      // FB.CustomerChat.hideDialog();
      hideDialog = FB.CustomerChat.hideDialog;
      FB.Event.subscribe('customerchat.dialogShow', ()=>console.log('dialog show webhook'));
     };

     (function(d, s, id) {
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s); js.id = id;
       js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));

   </script> -->
  
  <!-- Show facebook login -->
   <script>
    function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
      console.log('statusChangeCallback');
      console.log(response);                   // The current login status of the person.
      if (response.status === 'connected') {   // Logged into your webpage and Facebook.
        testAPI();  
      } else {                                 // Not logged into your webpage or we are unable to tell.
        document.getElementById('status').innerHTML = 'Please log ' +
          'into this webpage.';
      }
    }

    function checkLoginState() {               // Called when a person is finished with the Login Button.
      FB.getLoginStatus(function(response) {   // See the onlogin handler
        statusChangeCallback(response);
      });
    }

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '487178232025316',
        cookie     : true,
        xfbml      : true,
        version    : 'v12.0'
      });
        
      FB.getLoginStatus(function(response) {   // Called after the JS SDK has been initialized.
        statusChangeCallback(response);        // Returns the login status.
      });
    };

    function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
      console.log('Welcome!  Fetching your information.... ');
      FB.api('/me', function(response) {
        console.log('Successful login for: ' + response.name);
        document.getElementById('status').innerHTML =
          'Thanks for logging in, ' + response.name + '!';
      });
      
    }

    logoutFbUser = () => {
      alert('you clicking logout')
      FB.logout(function(response) {
      // Person is now logged out
      alert('you are logged out')
      });
    }

    (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));   

  </script>

  <button onclick="logoutFbUser()">Logout</button>


    <!-- JS Libs & Plugins
  ============================================ -->
    <script src="js/libs/jquery.modernizr.js"></script>
    <script src="js/libs/jquery-2.2.4.min.js"></script>
    <script src="js/libs/jquery-ui.min.js"></script>
    <script src="js/libs/retina.min.js"></script>
    <script src="plugins/jquery.localScroll.min.js"></script>
    <script src="plugins/jquery.scrollTo.min.js"></script>
    <script src="plugins/jquery.countdown.min.js"></script>
    <script src="plugins/fancybox/jquery.fancybox.js"></script>
    <script src="plugins/mad.customselect.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;key=AIzaSyBN4XjYeIQbUspEkxCV2dhVPSoScBkIoic"></script>
    <script src="plugins/instafeed.min.js"></script>
    <script src="plugins/revolution/js/jquery.themepunch.tools.min.js?ver=5.0"></script>
    <script src="plugins/revolution/js/jquery.themepunch.revolution.min.js?ver=5.0"></script>
    <script src="plugins/jquery.queryloader2.min.js"></script>
    <script src="plugins/owl.carousel.min.js"></script>

    <!-- JS theme files
  ============================================ -->
    <script src="js/plugins.js"></script>
    <script src="js/script.js"></script>

    <script type="text/javascript"
      src="plugins/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script type="text/javascript"
      src="plugins/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script type="text/javascript"
      src="plugins/revolution/js/extensions/revolution.extension.navigation.min.js"></script>

    <fb:login-button scope="public_profile,pages_show_list,pages_manage_metadata,pages_messaging" onlogin="checkLoginState();">
    </fb:login-button>

    <div id="status">
    </div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>

</body>

</html>
